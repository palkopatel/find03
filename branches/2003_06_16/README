
          Работа с программой из коммандной строки


                1. ПРЕДВАРИТЕЛЬНАЯ ИНДЕКСАЦИЯ 
                              И
                    ГЕНЕРАЦИЯ БАЗЫ СЛОВ

   Перед  тем как  проводить поиск  надо  проиндексировать
нужные  файлы  и  создать  базу  слов.  Последовательность
действий  такова (пусть  программа  индексации  называется
"findw_t.exe"):

   1. Отредактировать  файл  со  ссылками  и  масками  (по
      умолчанию  это  "1filelst"),  добавив в него пути  к
      нужным файлам. Разделителем является перевод строки.
      При  необходимости  можно  отредактировать  файлы  с
      "разрешенными"    ("1lexemfl")   и    "запрещенными"
      ("1unknwnl")   тегами HTML  (подробности   смотри  в 
      пункт 4.1).
   2. Для предварительной индексации программа запускается
      с ключом "-c".
   3. Для  создания  базы  слов  программа  запускается  с
      ключом "-d".   После него  может  быть  через пробел 
      указан  коэффициент индексации  -  натуральное число 
      (он описан в пунктах 4 и 6).
   4. При предварительной индексации и создании базы  слов
      можно вести протокол ошибок в файл  (по умолчанию он
      называется  "2errors"),   а  не на  экран,  запустив
      программу с ключом "-e". 
   5. При предварительной индексации можно подстраховаться
      на случай аварийного завершения программы,  запустив
      ее с ключом "-l". Будет создан файл с необработанны-
      ми  ссылками (по  умолчанию  "2logs"),  которым  при
      повторном запуске  с  параметром "-c" можно заменить
      файл "1filelst". Эта возможность может использовать-
      ся при  написании  коммандных файлов.  Пример смотри
      ниже.

##########################################################
             ПРИМЕР СКРИПТА ДЛЯ MS WINDOWS:	
##########################################################

             @echo off
             echo предварительная индексация
             :running
             findw.exe -c -l -e
             if not exist "2log" goto next
             move "2log" "1filelst"
             goto running
             :next
             echo генерация базы слов
             findw.exe -d %1 -e
             rem конец!	

##########################################################
             ПРИМЕР СКРИПТА ДЛЯ LINUX:
##########################################################

             #!/bin/bash
             echo предварительная индексация
             while true; do
               ./findw.exe -c -l -e
               if [ -e "2log" ]; then 
                 mv "2log" "1filelst"
               else 
                 break;
               fi
             done
             echo генерация базы слов
             ./findw.exe -d $1 -e
             # конец!

   Готовые  скрипты в файлах "run.bat" (для MS Windows)  и
   "runc" (для Linux)



                2. ПОИСК В БАЗЕ СЛОВ


   Пусть поисковая часть программы  (поисковик) называется 
"find03.exe".
   Чтобы произвести локальный  поиск программа запускается
с  ключом  "--file", после  которого  перечисляются слова.
Результат  будет записан в файл  "res.htm",  который можно
посмотреть в Web-браузере.
   Если   в   каталоге  будет   обнаружен  файл  с  именем
"3prefix",  то  строка,   которая  в  нем  указана,  будет
прибавлена к началу каждого найденного файла.
   Чтобы встроить поисковик в портал,  сайт  или страницу,
надо:
   1. Предварительную индексацию и создание базы слов про-
      водить в корневом каталоге сайта.
   2. Поместить  "find03.exe"  в  каталог  скриптов   web-
      сервера.  Вместе с поисковиком скопировать базу слов
      (по умолчанию - это файлы "3words" и "2tmpfile").
   3. Создать файл "3prefix", в котором указать  DNS-адрес
      (или IP-адрес)  корневого каталога сайта  (например,
      "http://null.ru/~aa10a" или "http://222.0.0.2").
   4. Написать  интерфейс  поисковика  и  сделать  на него
      ссылку. Простой пример приведен ниже:

##########################################################
           ПРИМЕР ВЫЗОВА ПОИСКОВИКА ИЗ HTML
##########################################################
           <html>
           <head>
           </head>
           <body bgcolor=#fffff2>
           <form method=post action="/cgi-bin/find03.exe">
           <input type="text" size=70 name="message">
           <br>
           <input type="submit" value="Искать">
           <input type="reset" value="Очистить">
           </form>
           </body>
           </html>
           <!-- конец -->


   Можно  вызывать  поисковик напрямую из адресной  строки
браузера.  Например: "http://222.0.0.2/cgi-bin/find03.exe?
слово%20слово2".
